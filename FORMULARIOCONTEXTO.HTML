<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente para Creación de Portafolios Docentes 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .accordion-content, .dynamic-help {
            display: none;
            overflow: hidden;
        }
        .accordion-button.active .arrow-icon {
            transform: rotate(180deg);
        }
        label {
            font-weight: 600;
            color: #374151;
        }
        input[type="text"], input[type="email"], input[type="tel"], input[type="number"], select, textarea {
            background-color: #f9fafb;
            border-color: #d1d5db;
        }
        input[type="text"]:focus, input[type="email"]:focus, input[type="tel"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
            --tw-ring-color: #3b82f6;
            border-color: #3b82f6;
        }
        .tooltip-icon {
            cursor: help;
            display: inline-block;
            margin-left: 8px;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-gradient-to-r from-blue-800 to-indigo-900 text-white shadow-lg">
        <div class="container mx-auto px-6 py-12 text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Asistente de Portafolio Docente 2025</h1>
            <p class="mt-4 text-lg text-indigo-200 max-w-3xl mx-auto">Ingresa la información de contexto y generaremos un borrador completo y de alta calidad para tu evaluación.</p>
        </div>
    </header>

    <main class="container mx-auto px-4 md:px-6 py-10">
        <div id="portfolio-form-container" class="bg-white p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-200">

            <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-6 rounded-r-lg mb-8">
                <h2 class="font-bold text-xl mb-2">Objetivo de este Formulario</h2>
                <p class="text-base">Este asistente está diseñado para recopilar la información esencial de tu práctica pedagógica. Completar cada campo con el mayor detalle posible es el primer paso para construir un portafolio que cumpla al 100% con los criterios de los niveles <strong>Competente y Destacado</strong> (Calificación A).</p>
                <p class="mt-3 font-semibold">Al usar tus propias experiencias, anécdotas y datos, aseguramos que el resultado sea un reflejo auténtico de tu trabajo, totalmente personalizado. Esta es la mejor estrategia para <strong>evitar cualquier riesgo de plagio y asegurar la validez de tu evaluación</strong>.</p>
            </div>

            <!-- Inicia Nueva Sección: Datos del Contratante -->
            <div class="border-b border-gray-200 py-4">
                <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-indigo-600 font-black">Información de la Persona Contratante</span></span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="nombre_contratante" class="block mb-2">Nombre Completo</label>
                            <input type="text" id="nombre_contratante" class="w-full p-3 border rounded-lg" placeholder="Ej: Maria Ignacia Pérez">
                        </div>
                        <div>
                            <label for="rut_contratante" class="block mb-2">RUT</label>
                            <input type="text" id="rut_contratante" class="w-full p-3 border rounded-lg" placeholder="Ej: 12.345.678-9">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="email_contratante" class="block mb-2">Correo Electrónico de Contacto</label>
                            <input type="email" id="email_contratante" class="w-full p-3 border rounded-lg" placeholder="ejemplo@correo.com">
                        </div>
                        <div>
                            <label for="telefono_contratante" class="block mb-2">Teléfono de Contacto</label>
                            <input type="tel" id="telefono_contratante" class="w-full p-3 border rounded-lg" placeholder="+56 9 1234 5678">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Termina Nueva Sección: Datos del Contratante -->

            <div class="border-b border-gray-200 py-4">
                <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-blue-600">Paso 1:</span> Información General del Docente</span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div>
                        <label for="nombre" class="block mb-2">Nombre Completo del Docente</label>
                        <input type="text" id="nombre" class="w-full p-3 border rounded-lg" placeholder="Ej: Francisco Javier Moya González">
                    </div>
                    <div>
                        <label for="establecimiento" class="block mb-2">Establecimiento Educativo</label>
                        <input type="text" id="establecimiento" class="w-full p-3 border rounded-lg" placeholder="Ej: Liceo Bicentenario de Excelencia">
                    </div>
                    <div>
                        <label for="tipo_evaluacion" class="block mb-2">Tipo de Evaluación / Manual</label>
                        <select id="tipo_evaluacion" class="w-full p-3 border rounded-lg">
                            <option selected disabled>Seleccione el manual correspondiente...</option>
                            <option value="media_7_8_basica">Manual 7° y 8° Ed. Básica y Educación Media 2025</option>
                            <option value="contextos_encierro">Manual Contextos de Encierro 2025</option>
                            <option value="basica_asignaturas">Manual Ed. Básica Asignaturas 2025</option>
                            <option value="basica_generalista">Manual Ed. Básica Generalista 2025</option>
                            <option value="media_tp">Manual Ed. Media Técnico Profesional 2025</option>
                            <option value="jovenes_adultos">Manual Ed. Personas Jóvenes y Adultas 2025</option>
                            <option value="especial_especial">Manual Educación Especial Escuela Especial (NEEP) 2025</option>
                            <option value="especial_regular">Manual Educación Especial Escuela Regular 2025</option>
                            <option value="parvularia">Manual Educación Parvularia 2025</option>
                        </select>
                    </div>
                    <div>
                        <label for="asignatura" class="block mb-2">Asignatura(s) en que se evalúa</label>
                        <input type="text" id="asignatura" class="w-full p-3 border rounded-lg" placeholder="Ej: Educación Física y Salud">
                    </div>
                    <div>
                        <label for="curso" class="block mb-2">Curso(s) específico(s) para la planificación</label>
                        <input type="text" id="curso" class="w-full p-3 border rounded-lg" placeholder="Ej: 2° Medio E">
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-200 py-4">
                 <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-blue-600">Paso 2:</span> Contexto del Establecimiento y Estudiantes</span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div>
                        <label for="pei" class="block mb-2">Sellos o Énfasis del PEI <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="pei" rows="3" class="w-full p-3 border rounded-lg" placeholder="Ej: Sello de vida saludable, formación integral, inclusión, excelencia académica, etc."></textarea>
                    </div>
                    <div>
                        <label for="recursos" class="block mb-2">Recursos e Infraestructura <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="recursos" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe los espacios (gimnasio, patio, etc.) y materiales (balones, conos, pizarras, etc.) con los que cuentas. Menciona si hay limitaciones."></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <label for="tiempo_total" class="block mb-2">Duración total del bloque (minutos)</label>
                            <input type="number" id="tiempo_total" class="w-full p-3 border rounded-lg" placeholder="Ej: 90">
                        </div>
                        <div>
                            <label for="tiempo_efectivo" class="block mb-2">Tiempo efectivo de clase (minutos) <span class="tooltip-icon" title="Este es el tiempo real para actividades de aprendizaje, descontando tiempos de vestuario, lista, etc.">🔦</span></label>
                            <input type="number" id="tiempo_efectivo" class="w-full p-3 border rounded-lg" placeholder="Ej: 50">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="total_estudiantes" class="block mb-2">N° Total de Estudiantes</label>
                            <input type="number" id="total_estudiantes" class="w-full p-3 border rounded-lg" placeholder="Ej: 45">
                        </div>
                        <div>
                            <label for="pie_estudiantes" class="block mb-2">N° Estudiantes PIE</label>
                            <input type="number" id="pie_estudiantes" class="w-full p-3 border rounded-lg" placeholder="Ej: 5">
                        </div>
                        <div>
                            <label for="ive" class="block mb-2">Índice de Vulnerabilidad (%)</label>
                            <input type="number" id="ive" class="w-full p-3 border rounded-lg" placeholder="Ej: 85">
                        </div>
                    </div>
                    <div>
                        <label for="caracteristicas_pie" class="block mb-2">Características Estudiantes PIE <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="caracteristicas_pie" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe cómo se manifiestan sus necesidades en tu clase (ej: lentitud para entender instrucciones, distracciones, dificultades motrices) y qué adecuaciones sueles implementar."></textarea>
                    </div>
                    <div>
                        <label for="intereses" class="block mb-2">Intereses y Gustos de los Estudiantes <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="intereses" rows="4" class="w-full p-3 border rounded-lg" placeholder="¿Qué deportes o actividades prefieren? ¿Qué les disgusta? ¿Cómo es su nivel general de habilidad y condición física?"></textarea>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-200 py-4">
                <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-blue-600">Paso 3:</span> Módulo 2 - Clase Grabada</span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div>
                        <label for="oa_grabada" class="block mb-2">OA curricular de la clase a grabar <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="oa_grabada" rows="3" class="w-full p-3 border rounded-lg" placeholder="Copia y pega aquí el OA de las Bases Curriculares."></textarea>
                    </div>
                     <div>
                        <label for="objetivo_grabada" class="block mb-2">Objetivo específico de esa clase (40 min)</label>
                        <textarea id="objetivo_grabada" rows="3" class="w-full p-3 border rounded-lg" placeholder="Describe en una frase qué esperas que los estudiantes logren en esa clase específica."></textarea>
                    </div>
                    <div>
                        <label for="materiales_grabada" class="block mb-2">Materiales para la clase grabada <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="materiales_grabada" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe los materiales concretos que usarás (pizarra, proyector, balones, conos, guías, etc.). Esto nos permitirá crear un libreto realista y detallado."></textarea>
                    </div>
                </div>
            </div>

            <div class="border-b border-gray-200 py-4">
                <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-blue-600">Paso 4:</span> Módulo 3 - Trabajo Colaborativo</span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div>
                        <label for="tema_colab" class="block mb-2">Tema central de la experiencia colaborativa <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="tema_colab" rows="3" class="w-full p-3 border rounded-lg" placeholder="Describe el tema. Por ejemplo: Campeonato de Futsal para mejorar la convivencia post-pandemia, Organización de la Fiesta de la Chilenidad, Proyecto REMA para fortalecer el vínculo con las familias, etc."></textarea>
                    </div>
                    <div>
                        <label for="participantes_colab" class="block mb-2">¿Con quiénes colaboraste? <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="participantes_colab" rows="3" class="w-full p-3 border rounded-lg" placeholder="Ej: Encargado de Convivencia Escolar, Dupla Psicosocial, equipo de ACLE, profesores de otros subsectores, etc."></textarea>
                    </div>
                    <div>
                        <label for="problema_colab" class="block mb-2">Problemática y evidencias que motivaron el trabajo <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="problema_colab" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe el problema (ej: aumento de conflictos en recreos) y las evidencias que usaron para diagnosticarlo (ej: registros de inspectoría, observación directa, etc.)."></textarea>
                    </div>
                    <div>
                        <label for="dialogo_colab" class="block mb-2">Diálogo, consensos y disensos en la planificación <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="dialogo_colab" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe las diferentes ideas que surgieron. ¿Hubo desacuerdos? ¿Cómo llegaron a una solución conjunta?"></textarea>
                    </div>
                </div>
            </div>

            <div class="py-4">
                <button class="accordion-button w-full flex justify-between items-center text-left text-xl font-bold text-gray-800 focus:outline-none">
                    <span><span class="text-blue-600">Paso 5:</span> Autoevaluación y Notas Adicionales</span>
                    <svg class="arrow-icon w-6 h-6 text-gray-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content mt-4 space-y-6">
                    <div>
                        <label for="fortaleza_profesional" class="block mb-2">Tu principal fortaleza profesional <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="fortaleza_profesional" rows="4" class="w-full p-3 border rounded-lg" placeholder="Describe un aspecto en el que te destacas (ej: buena comunicación con los estudiantes, planificación creativa, manejo de grupo, etc.) y da un ejemplo concreto."></textarea>
                    </div>
                    <div>
                        <label for="necesidad_profesional" class="block mb-2">Un aspecto a mejorar o necesidad profesional <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="necesidad_profesional" rows="4" class="w-full p-3 border rounded-lg" placeholder="Identifica un área que te gustaría fortalecer (ej: diversificar estrategias de evaluación, mejorar el trabajo con apoderados, incorporar más tecnología, etc.) y por qué."></textarea>
                    </div>
                    <div>
                        <label for="notas_adicionales" class="block mb-2">Notas Adicionales o consideraciones importantes <span class="tooltip-icon" title="No es necesario que la respuesta sea tan profesional o extensa, basta con una breve descripción.">🔦</span></label>
                        <textarea id="notas_adicionales" rows="4" class="w-full p-3 border rounded-lg" placeholder="Anota aquí cualquier otra información que consideres relevante para la creación de tu portafolio."></textarea>
                    </div>
                </div>
            </div>

            <div class="mt-10 flex flex-col md:flex-row items-center justify-center gap-4">
                <button id="download-pdf" class="w-full md:w-auto bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-10 rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-300">
                    Descargar Respuestas en PDF
                </button>
            </div>
            <div class="mt-4 text-center">
                <span id="autosave-status" class="text-sm text-gray-500 italic transition-opacity duration-500 opacity-0"></span>
            </div>

        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const formContainer = document.getElementById('portfolio-form-container');
            const formElements = formContainer.querySelectorAll('input, select, textarea');
            const statusElement = document.getElementById('autosave-status');
            const tipoEvaluacionSelect = document.getElementById('tipo_evaluacion');

            // --- Accordion Logic ---
            const accordionButtons = document.querySelectorAll('.accordion-button');
            accordionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    button.classList.toggle('active');
                    if (content.style.display === 'block') {
                        content.style.display = 'none';
                    } else {
                        content.style.display = 'block';
                    }
                });
            });
            // Open the first two accordions by default (Contratante y Paso 1)
            if(accordionButtons.length > 0) {
                accordionButtons[0].click(); 
                accordionButtons[1].click();
            }

            // --- Autosave Logic ---
            const saveForm = () => {
                const formData = {};
                formElements.forEach(el => {
                    formData[el.id] = el.value;
                });
                localStorage.setItem('portfolioFormData', JSON.stringify(formData));
                
                statusElement.textContent = `Autoguardado a las ${new Date().toLocaleTimeString()}`;
                statusElement.classList.remove('opacity-0');
                setTimeout(() => {
                    statusElement.classList.add('opacity-0');
                }, 2000);
            };

            const loadForm = () => {
                const savedData = localStorage.getItem('portfolioFormData');
                if (savedData) {
                    const formData = JSON.parse(savedData);
                    formElements.forEach(el => {
                        if (formData[el.id] !== undefined) {
                            el.value = formData[el.id];
                        }
                    });
                }
            };

            loadForm();
            setInterval(saveForm, 60000); // Autosave every 60 seconds

            // --- PDF Download Logic ---
            document.getElementById('download-pdf').addEventListener('click', () => {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                
                statusElement.textContent = 'Generando PDF...';
                statusElement.classList.remove('opacity-0');

                let y = 15; // Initial Y position
                const pageHeight = pdf.internal.pageSize.getHeight();
                const margin = 15;
                const maxWidth = pdf.internal.pageSize.getWidth() - margin * 2;

                const addText = (label, value) => {
                    if (!value) return; // Skip empty fields
                    
                    const labelLines = pdf.splitTextToSize(label, maxWidth);
                    const valueLines = pdf.splitTextToSize(value, maxWidth);
                    const requiredHeight = (labelLines.length * 6) + (valueLines.length * 5) + 8;

                    if (y + requiredHeight > pageHeight - margin) {
                        pdf.addPage();
                        y = margin;
                    }
                    
                    pdf.setFont('helvetica', 'bold');
                    pdf.text(label, margin, y);
                    y += (labelLines.length * 6);
                    
                    pdf.setFont('helvetica', 'normal');
                    pdf.text(valueLines, margin, y);
                    y += (valueLines.length * 5) + 10;
                };
                
                pdf.setFontSize(18);
                pdf.text('Respuestas del Asistente de Portafolio', margin, y);
                y += 15;
                pdf.setFontSize(11);

                formElements.forEach(el => {
                    if (el.value && el.id) {
                        const labelElement = document.querySelector(`label[for='${el.id}']`);
                        if (labelElement) {
                            const labelText = labelElement.textContent.replace('🔦','').trim();
                            addText(labelText, el.value);
                        }
                    }
                });

                const nombreContratante = document.getElementById('nombre_contratante').value || 'docente';
                const safeFileName = nombreContratante.replace(/[^a-z0-9]/gi, '_').toLowerCase();
                pdf.save(`respuestas_portafolio_${safeFileName}.pdf`);

                statusElement.textContent = 'PDF Descargado.';
                 setTimeout(() => {
                    statusElement.classList.add('opacity-0');
                }, 2000);
            });
        });
    </script>

</body>
</html>
