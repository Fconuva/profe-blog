---
layout: base.njk
title: Matem√°tica Educaci√≥n Media - Evaluaci√≥n ECEP 2025
pagination:
  data: collections.all
  size: 1
  addAllPagesToCollections: true
permalink: /evaluaciones/educacion-media/pruebas/67-cm-m/
eleventyNavigation:
  key: Matem√°tica Media
  parent: Evaluaciones Media
  order: 3
---

{% set evaluacionData = collections.all | getEvaluacionData("67-cm-m") %}

<div class="container py-5">
  <div class="row">
    <div class="col-lg-10 mx-auto">
      <!-- Header -->
      <div class="text-center mb-4">
        <h1 class="display-5 fw-bold text-primary">üìê Matem√°tica Educaci√≥n Media</h1>
        <p class="lead text-muted">Evaluaci√≥n Estandarizada ECEP 2025 - C√≥digo: 67-cm-m</p>
        <p class="text-secondary">7¬∞ b√°sico a 4¬∞ medio ‚Ä¢ 50 preguntas ‚Ä¢ 90 minutos estimados</p>
      </div>

      <!-- Distribuci√≥n por Dominio -->
      <div class="alert alert-info mb-4" role="alert">
        <h5 class="alert-heading">üìä Distribuci√≥n por Dominios</h5>
        <div class="row text-center mt-3">
          <div class="col-md-3 col-6 mb-2">
            <div class="border rounded p-2 bg-white">
              <strong>N√∫meros y √Ålgebra</strong><br>
              <span class="badge bg-primary">8 preguntas (27%)</span>
            </div>
          </div>
          <div class="col-md-3 col-6 mb-2">
            <div class="border rounded p-2 bg-white">
              <strong>Geometr√≠a</strong><br>
              <span class="badge bg-success">7 preguntas (23%)</span>
            </div>
          </div>
          <div class="col-md-3 col-6 mb-2">
            <div class="border rounded p-2 bg-white">
              <strong>Probabilidad y Estad√≠stica</strong><br>
              <span class="badge bg-warning">8 preguntas (27%)</span>
            </div>
          </div>
          <div class="col-md-3 col-6 mb-2">
            <div class="border rounded p-2 bg-white">
              <strong>Funciones</strong><br>
              <span class="badge bg-danger">7 preguntas (23%)</span>
            </div>
          </div>
        </div>
        <p class="mb-0 mt-3"><strong>20 preguntas adicionales</strong> en 5 casos de estudio interdisciplinarios</p>
      </div>

      <!-- Barra de Progreso -->
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="mb-0">Progreso</h5>
            <span id="progreso-texto" class="badge bg-secondary">0 / 50 respondidas</span>
          </div>
          <div class="progress" style="height: 25px;">
            <div id="barra-progreso" class="progress-bar progress-bar-striped progress-bar-animated" 
                 role="progressbar" style="width: 0%;" 
                 aria-valuenow="0" aria-valuemin="0" aria-valuemax="50">0%</div>
          </div>
        </div>
      </div>

      <!-- Instrucciones -->
      <div class="card mb-4 border-primary">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">üìã Instrucciones</h5>
        </div>
        <div class="card-body">
          <ul class="mb-0">
            <li>Lee cuidadosamente cada pregunta antes de responder</li>
            <li>Selecciona <strong>UNA sola alternativa</strong> (A, B, C o D) por pregunta</li>
            <li>Las preguntas 1-30 eval√∫an conocimientos espec√≠ficos por dominio</li>
            <li>Las preguntas 31-50 est√°n integradas en <strong>5 casos de estudio</strong> contextualizados</li>
            <li>Puedes cambiar tus respuestas antes de revisar</li>
            <li>Al finalizar, presiona <strong>"Revisar respuestas"</strong> para ver la retroalimentaci√≥n</li>
            <li>Las f√≥rmulas matem√°ticas se renderizan autom√°ticamente</li>
          </ul>
        </div>
      </div>

      <!-- Formulario de Evaluaci√≥n -->
      <form id="formulario-evaluacion">
        
        <!-- SECCI√ìN 1: PREGUNTAS BASE (1-30) -->
        <div class="mb-5">
          <h3 class="text-center mb-4 text-primary">
            <span class="badge bg-primary">Parte I</span> Preguntas por Dominio (1-30)
          </h3>

          {% for pregunta in evaluacionData.exam.preguntas %}
          <div class="card mb-3 shadow-sm pregunta-card" data-dominio="{{ pregunta.dominio }}">
            <div class="card-header bg-light">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-0">
                  <span class="badge 
                    {% if pregunta.dominio == 'N√∫meros y √Ålgebra' %}bg-primary{% endif %}
                    {% if pregunta.dominio == 'Geometr√≠a' %}bg-success{% endif %}
                    {% if pregunta.dominio == 'Probabilidad y Estad√≠stica' %}bg-warning text-dark{% endif %}
                    {% if pregunta.dominio == 'Funciones' %}bg-danger{% endif %}">
                    {{ pregunta.dominio }}
                  </span>
                  Pregunta {{ pregunta.numero }}
                </h6>
                <small class="text-muted">{{ pregunta.habilidad }}</small>
              </div>
            </div>
            <div class="card-body">
              <p class="fw-bold mb-3">{{ pregunta.enunciado }}</p>
              
              <div class="opciones">
                {% for alt in pregunta.alternativas %}
                <div class="form-check mb-2">
                  <input class="form-check-input" type="radio" 
                         name="pregunta-{{ pregunta.id }}" 
                         id="{{ pregunta.id }}-{{ alt.letra }}" 
                         value="{{ alt.letra }}"
                         data-correcta="{{ pregunta.respuesta_correcta }}"
                         data-explicacion="{{ pregunta.explicacion }}">
                  <label class="form-check-label w-100" for="{{ pregunta.id }}-{{ alt.letra }}">
                    <strong>{{ alt.letra }})</strong> {{ alt.texto }}
                  </label>
                </div>
                {% endfor %}
              </div>

              <!-- √Årea de retroalimentaci√≥n (oculta inicialmente) -->
              <div class="alert mt-3 d-none retroalimentacion" role="alert"></div>
            </div>
          </div>
          {% endfor %}
        </div>

        <!-- SECCI√ìN 2: CASOS DE ESTUDIO (31-50) -->
        <div class="mb-5">
          <h3 class="text-center mb-4 text-success">
            <span class="badge bg-success">Parte II</span> Casos de Estudio Aplicados (31-50)
          </h3>

          {% for caso in evaluacionData.exam.casos_estudio %}
          <div class="card mb-4 border-success shadow">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">
                üìö {{ caso.titulo }}
                <small class="float-end">
                  {% for dom in caso.dominios %}
                  <span class="badge bg-light text-dark">{{ dom }}</span>
                  {% endfor %}
                </small>
              </h5>
            </div>
            <div class="card-body bg-light">
              <h6 class="text-primary">Contexto:</h6>
              <p class="mb-0">{{ caso.contexto }}</p>
            </div>

            <!-- Preguntas del caso -->
            {% for pregunta in caso.preguntas %}
            <div class="card-body border-top">
              <h6 class="text-muted mb-2">Pregunta {{ pregunta.numero }}</h6>
              <p class="fw-bold mb-3">{{ pregunta.enunciado }}</p>
              
              <div class="opciones">
                {% for alt in pregunta.alternativas %}
                <div class="form-check mb-2">
                  <input class="form-check-input" type="radio" 
                         name="pregunta-{{ pregunta.id }}" 
                         id="{{ pregunta.id }}-{{ alt.letra }}" 
                         value="{{ alt.letra }}"
                         data-correcta="{{ pregunta.respuesta_correcta }}"
                         data-explicacion="{{ pregunta.explicacion }}">
                  <label class="form-check-label w-100" for="{{ pregunta.id }}-{{ alt.letra }}">
                    <strong>{{ alt.letra }})</strong> {{ alt.texto }}
                  </label>
                </div>
                {% endfor %}
              </div>

              <!-- √Årea de retroalimentaci√≥n -->
              <div class="alert mt-3 d-none retroalimentacion" role="alert"></div>
            </div>
            {% endfor %}
          </div>
          {% endfor %}
        </div>

        <!-- Bot√≥n Revisar -->
        <div class="text-center mb-5">
          <button type="button" id="btn-revisar" class="btn btn-lg btn-primary px-5 py-3 shadow-lg">
            ‚úÖ Revisar respuestas
          </button>
        </div>

      </form>

      <!-- Resultados (oculto inicialmente) -->
      <div id="resultados-container" class="d-none">
        <div class="card border-success shadow-lg">
          <div class="card-header bg-success text-white text-center">
            <h4 class="mb-0">üìä Resultados de la Evaluaci√≥n</h4>
          </div>
          <div class="card-body">
            <div class="row text-center">
              <div class="col-md-4 mb-3">
                <h2 class="display-4 text-success" id="puntaje-total">0/50</h2>
                <p class="text-muted">Respuestas correctas</p>
              </div>
              <div class="col-md-4 mb-3">
                <h2 class="display-4 text-primary" id="porcentaje-total">0%</h2>
                <p class="text-muted">Porcentaje de logro</p>
              </div>
              <div class="col-md-4 mb-3">
                <h2 class="display-4" id="nota-estimada">1.0</h2>
                <p class="text-muted">Nota estimada (escala 1-7)</p>
              </div>
            </div>

            <hr>

            <h5 class="text-center mb-3">Resultados por Dominio</h5>
            <div class="row" id="resultados-dominios">
              <!-- Se generar√° din√°micamente con JavaScript -->
            </div>

            <div class="alert alert-info mt-4">
              <strong>üí° Sugerencia:</strong> Revisa las explicaciones en rojo para reforzar los conceptos que necesitas mejorar.
            </div>
          </div>
        </div>
      </div>

      <!-- Navegaci√≥n -->
      <div class="text-center mt-5">
        <a href="/evaluaciones/media/" class="btn btn-outline-secondary">
          ‚Üê Volver a Evaluaciones Media
        </a>
        <a href="/evaluaciones/media/estudio/matematica-media/" class="btn btn-outline-primary ms-2">
          üìö Material de Estudio
        </a>
      </div>

    </div>
  </div>
</div>

<!-- Script de correcci√≥n y retroalimentaci√≥n -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('formulario-evaluacion');
  const btnRevisar = document.getElementById('btn-revisar');
  const barraProgreso = document.getElementById('barra-progreso');
  const progresoTexto = document.getElementById('progreso-texto');
  const resultadosContainer = document.getElementById('resultados-container');
  
  const totalPreguntas = 50;
  let respuestasSeleccionadas = 0;

  // Actualizar progreso al seleccionar opciones
  form.addEventListener('change', function(e) {
    if (e.target.type === 'radio') {
      actualizarProgreso();
    }
  });

  function actualizarProgreso() {
    const radiosSeleccionados = form.querySelectorAll('input[type="radio"]:checked');
    respuestasSeleccionadas = new Set([...radiosSeleccionados].map(r => r.name)).size;
    
    const porcentaje = Math.round((respuestasSeleccionadas / totalPreguntas) * 100);
    
    barraProgreso.style.width = porcentaje + '%';
    barraProgreso.textContent = porcentaje + '%';
    barraProgreso.setAttribute('aria-valuenow', respuestasSeleccionadas);
    
    progresoTexto.textContent = `${respuestasSeleccionadas} / ${totalPreguntas} respondidas`;
    
    // Cambiar color seg√∫n progreso
    barraProgreso.className = 'progress-bar progress-bar-striped';
    if (porcentaje < 50) {
      barraProgreso.classList.add('bg-danger');
    } else if (porcentaje < 100) {
      barraProgreso.classList.add('bg-warning');
    } else {
      barraProgreso.classList.add('bg-success');
    }
  }

  // Revisar respuestas
  btnRevisar.addEventListener('click', function() {
    if (respuestasSeleccionadas < totalPreguntas) {
      if (!confirm(`Has respondido ${respuestasSeleccionadas} de ${totalPreguntas} preguntas. ¬øDeseas revisar de todos modos?`)) {
        return;
      }
    }

    corregirEvaluacion();
    btnRevisar.disabled = true;
    btnRevisar.textContent = '‚úÖ Evaluaci√≥n revisada';
    btnRevisar.classList.remove('btn-primary');
    btnRevisar.classList.add('btn-secondary');
    
    // Scroll suave a resultados
    setTimeout(() => {
      resultadosContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 500);
  });

  function corregirEvaluacion() {
    const radiosSeleccionados = form.querySelectorAll('input[type="radio"]:checked');
    let correctas = 0;
    const resultadosPorDominio = {
      'N√∫meros y √Ålgebra': { correctas: 0, total: 8 },
      'Geometr√≠a': { correctas: 0, total: 7 },
      'Probabilidad y Estad√≠stica': { correctas: 0, total: 8 },
      'Funciones': { correctas: 0, total: 7 },
      'Casos de Estudio': { correctas: 0, total: 20 }
    };

    // Recorrer todas las preguntas
    const todasLasPreguntas = form.querySelectorAll('.pregunta-card, .card-body.border-top');
    todasLasPreguntas.forEach((preguntaElement, index) => {
      const numero = index + 1;
      const radios = preguntaElement.querySelectorAll('input[type="radio"]');
      const radioSeleccionado = preguntaElement.querySelector('input[type="radio"]:checked');
      const retroalimentacionDiv = preguntaElement.querySelector('.retroalimentacion');
      
      if (radios.length === 0) return;
      
      const respuestaCorrecta = radios[0].dataset.correcta;
      const explicacion = radios[0].dataset.explicacion;
      
      // Determinar dominio
      let dominio = 'Casos de Estudio';
      if (numero <= 8) dominio = 'N√∫meros y √Ålgebra';
      else if (numero <= 15) dominio = 'Geometr√≠a';
      else if (numero <= 23) dominio = 'Probabilidad y Estad√≠stica';
      else if (numero <= 30) dominio = 'Funciones';

      if (radioSeleccionado) {
        const esCorrecta = radioSeleccionado.value === respuestaCorrecta;
        
        if (esCorrecta) {
          correctas++;
          resultadosPorDominio[dominio].correctas++;
          
          retroalimentacionDiv.classList.remove('d-none', 'alert-danger');
          retroalimentacionDiv.classList.add('alert-success');
          retroalimentacionDiv.innerHTML = `
            <strong>‚úÖ Correcto!</strong><br>
            ${explicacion}
          `;
          
          radioSeleccionado.parentElement.classList.add('border', 'border-success', 'border-2', 'rounded');
        } else {
          retroalimentacionDiv.classList.remove('d-none', 'alert-success');
          retroalimentacionDiv.classList.add('alert-danger');
          retroalimentacionDiv.innerHTML = `
            <strong>‚ùå Incorrecto.</strong> La respuesta correcta es <strong>${respuestaCorrecta}</strong>.<br>
            <strong>Explicaci√≥n:</strong> ${explicacion}
          `;
          
          radioSeleccionado.parentElement.classList.add('border', 'border-danger', 'border-2', 'rounded');
          
          // Marcar la correcta en verde
          radios.forEach(radio => {
            if (radio.value === respuestaCorrecta) {
              radio.parentElement.classList.add('border', 'border-success', 'border-2', 'rounded', 'bg-light');
            }
          });
        }
      } else {
        // No respondida
        retroalimentacionDiv.classList.remove('d-none', 'alert-success');
        retroalimentacionDiv.classList.add('alert-warning');
        retroalimentacionDiv.innerHTML = `
          <strong>‚ö†Ô∏è No respondida.</strong> La respuesta correcta era <strong>${respuestaCorrecta}</strong>.<br>
          ${explicacion}
        `;
        
        // Marcar la correcta
        radios.forEach(radio => {
          if (radio.value === respuestaCorrecta) {
            radio.parentElement.classList.add('border', 'border-info', 'border-2', 'rounded', 'bg-light');
          }
        });
      }
    });

    // Mostrar resultados generales
    const porcentaje = Math.round((correctas / totalPreguntas) * 100);
    const nota = calcularNota(porcentaje);
    
    document.getElementById('puntaje-total').textContent = `${correctas}/${totalPreguntas}`;
    document.getElementById('porcentaje-total').textContent = porcentaje + '%';
    document.getElementById('nota-estimada').textContent = nota.toFixed(1);
    
    // Color de la nota
    const notaElement = document.getElementById('nota-estimada');
    if (nota >= 5.5) {
      notaElement.classList.add('text-success');
    } else if (nota >= 4.0) {
      notaElement.classList.add('text-warning');
    } else {
      notaElement.classList.add('text-danger');
    }

    // Resultados por dominio
    const resultadosDominiosDiv = document.getElementById('resultados-dominios');
    resultadosDominiosDiv.innerHTML = '';
    
    for (const [dominio, resultado] of Object.entries(resultadosPorDominio)) {
      const porcentajeDominio = Math.round((resultado.correctas / resultado.total) * 100);
      const colorClass = porcentajeDominio >= 70 ? 'success' : porcentajeDominio >= 50 ? 'warning' : 'danger';
      
      resultadosDominiosDiv.innerHTML += `
        <div class="col-md-4 col-sm-6 mb-3">
          <div class="card border-${colorClass}">
            <div class="card-body text-center">
              <h6 class="card-title">${dominio}</h6>
              <p class="display-6 text-${colorClass} mb-0">${resultado.correctas}/${resultado.total}</p>
              <small class="text-muted">${porcentajeDominio}%</small>
            </div>
          </div>
        </div>
      `;
    }

    resultadosContainer.classList.remove('d-none');
  }

  function calcularNota(porcentaje) {
    // Escala chilena: 60% = 4.0 (m√≠nimo aprobaci√≥n)
    if (porcentaje < 60) {
      return 1.0 + (porcentaje / 60) * 3.0;
    } else {
      return 4.0 + ((porcentaje - 60) / 40) * 3.0;
    }
  }
});
</script>

<!-- MathJax para renderizar f√≥rmulas matem√°ticas -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']]
    }
  };
</script>
