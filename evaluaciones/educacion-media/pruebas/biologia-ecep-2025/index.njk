---
layout: layout-evaluaciones.njk
title: Biolog√≠a ECEP 2025 - Conocimientos Espec√≠ficos y Pedag√≥gicos
permalink: /evaluaciones/educacion-media/pruebas/biologia-ecep-2025/
---

<div class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 py-8">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h1 class="text-5xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent mb-4">
        Biolog√≠a - ECEP 2025
      </h1>
      <p class="text-2xl text-gray-700 font-medium">Conocimientos Espec√≠ficos y Pedag√≥gicos</p>
      <p class="text-gray-600 mt-3 text-lg">üß¨ 52 preguntas ‚Ä¢ 5 Dominios ‚Ä¢ üéì Educaci√≥n Media Cient√≠fico Humanista</p>
      
      <!-- Bot√≥n de Estudio -->
      <div class="mt-8">
        <a href="/evaluaciones/educacion-media/estudio/ciencias-naturales-media/biologia/" class="inline-flex items-center bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-semibold py-4 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
          <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
          </svg>
          üìö Estudiar Dossier Biolog√≠a Completo
        </a>
      </div>
      
      <!-- Estad√≠sticas de progreso -->
      <div class="mt-8 bg-white rounded-xl shadow-md p-6 max-w-2xl mx-auto">
        <div class="flex justify-between items-center">
          <div>
            <p class="text-sm text-gray-600">Progreso</p>
            <p class="text-3xl font-bold text-purple-600"><span id="respuestas-completadas">0</span>/<span>52</span></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Correctas</p>
            <p class="text-3xl font-bold text-green-600"><span id="respuestas-correctas">0</span></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Incorrectas</p>
            <p class="text-3xl font-bold text-red-600"><span id="respuestas-incorrectas">0</span></p>
          </div>
        </div>
        <div class="mt-4 bg-gray-200 rounded-full h-3 overflow-hidden">
          <div id="barra-progreso" class="bg-gradient-to-r from-purple-500 to-indigo-600 h-full transition-all duration-500" style="width: 0%"></div>
        </div>
      </div>

      <!-- Navegador de preguntas -->
      <div class="mt-8 bg-white rounded-xl shadow-md p-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">Navegaci√≥n R√°pida</h3>
        <div id="navegador-preguntas" class="grid grid-cols-10 md:grid-cols-13 gap-2"></div>
      </div>
    </div>
    
    <form id="evaluacionForm" class="space-y-6">
      <!-- Las preguntas se cargar√°n din√°micamente aqu√≠ -->
      <div id="preguntas-container"></div>
    </form>

    <!-- Resultados finales -->
    <div id="resultados-finales" class="hidden mt-12 bg-white rounded-xl shadow-2xl p-8">
      <h2 class="text-4xl font-bold text-center mb-8 text-gray-800">üìä Resultados ECEP Biolog√≠a 2025</h2>
      
      <div class="grid md:grid-cols-3 gap-6 mb-8">
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 text-center">
          <p class="text-sm text-gray-600 mb-2">Correctas</p>
          <p class="text-5xl font-bold text-green-600"><span id="final-correctas">0</span></p>
          <p class="text-gray-500 mt-2"><span id="porcentaje-correctas">0</span>%</p>
        </div>
        
        <div class="bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-200 rounded-xl p-6 text-center">
          <p class="text-sm text-gray-600 mb-2">Incorrectas</p>
          <p class="text-5xl font-bold text-red-600"><span id="final-incorrectas">0</span></p>
          <p class="text-gray-500 mt-2"><span id="porcentaje-incorrectas">0</span>%</p>
        </div>
        
        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-xl p-6 text-center">
          <p class="text-sm text-gray-600 mb-2">Aprobaci√≥n</p>
          <p class="text-5xl font-bold text-blue-600"><span id="nota-final">0.0</span></p>
          <p class="text-gray-500 mt-2">60% m√≠nimo</p>
        </div>
      </div>

      <!-- Resultados por dominio -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold mb-4 text-gray-800">üìã Resultados por Dominio</h3>
        <div id="resultados-por-dominio" class="space-y-4"></div>
      </div>

      <!-- Botones de acci√≥n -->
      <div class="flex justify-center gap-4 flex-wrap">
        <button onclick="location.reload()" class="bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-8 py-4 rounded-xl font-semibold shadow-lg transition-all">
          üîÑ Reintentar Evaluaci√≥n
        </button>
        <a href="/evaluaciones/educacion-media/estudio/ciencias-naturales-media/biologia/" class="bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white px-8 py-4 rounded-xl font-semibold shadow-lg transition-all inline-block">
          üìö Volver a Estudiar
        </a>
      </div>
    </div>
  </div>
</div>

<script>
// Cargar datos del plan.json
let planData = null;
let respuestas = {};
let estadisticas = {
  correctas: 0,
  incorrectas: 0,
  porDominio: {}
};

// Cargar plan.json
const planJsonPath = '/evaluaciones/educacion-media/pruebas/biologia-ecep-2025/plan.json';
console.log('[QUIZ] Cargando plan desde:', planJsonPath);

fetch(planJsonPath)
  .then(response => {
    console.log('[QUIZ] Response status:', response.status);
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    console.log('[QUIZ] Plan cargado exitosamente. Preguntas:', data.questions?.length);
    planData = data;
    inicializarEstadisticas();
    renderizarNavegador();
    renderizarPreguntas();
    configurarEventListeners();
  })
  .catch(error => {
    console.error('[QUIZ] Error cargando plan.json:', error);
    const container = document.getElementById('preguntas-container');
    if (container) {
      container.innerHTML = `
        <div class="bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg">
          <h3 class="font-bold mb-2">‚ö†Ô∏è Error al cargar la evaluaci√≥n</h3>
          <p class="text-sm mb-2">No se pudo cargar el archivo de preguntas.</p>
          <p class="text-xs text-red-600">Error: ${error.message}</p>
          <button onclick="location.reload()" class="mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm">
            üîÑ Reintentar
          </button>
        </div>
      `;
    }
  });

function inicializarEstadisticas() {
  if (!planData || !planData.domains) {
    console.error('[QUIZ] Error: planData o domains no est√° definido');
    return;
  }
  planData.domains.forEach(domain => {
    estadisticas.porDominio[domain.id] = {
      nombre: domain.name,
      correctas: 0,
      total: domain.questions
    };
  });
  console.log('[QUIZ] Estad√≠sticas inicializadas:', estadisticas);
}

function renderizarNavegador() {
  const navegador = document.getElementById('navegador-preguntas');
  if (!navegador) {
    console.error('[QUIZ] Error: elemento navegador-preguntas no encontrado');
    return;
  }
  if (!planData || !planData.questions) {
    console.error('[QUIZ] Error: planData.questions no est√° definido');
    return;
  }
  
  let html = '';

  planData.questions.forEach((pregunta, index) => {
    const num = index + 1;
    html += `
      <button type="button" onclick="scrollToPregunta(${num})" 
              id="nav-btn-${num}"
              class="nav-pregunta w-10 h-10 rounded-lg font-semibold text-sm transition-all hover:scale-110 bg-gray-200 text-gray-700 hover:bg-purple-100">
        ${num}
      </button>
    `;
  });

  navegador.innerHTML = html;
  console.log('[QUIZ] Navegador renderizado con', planData.questions.length, 'botones');
}

function scrollToPregunta(numero) {
  const elemento = document.querySelector(`[data-pregunta="${numero}"]`);
  if (elemento) {
    elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
    elemento.classList.add('ring-4', 'ring-purple-300');
    setTimeout(() => {
      elemento.classList.remove('ring-4', 'ring-purple-300');
    }, 2000);
  }
}

function getDifficultyLabel(difficulty) {
  const labels = {
    'easy': '‚≠ê F√°cil',
    'medium': '‚≠ê‚≠ê Medio',
    'hard': '‚≠ê‚≠ê‚≠ê Dif√≠cil'
  };
  return labels[difficulty] || difficulty;
}

function getDomainColor(domainId) {
  if (!planData || !planData.domains) {
    console.warn('[QUIZ] planData.domains no disponible');
    return { bg: 'bg-blue-100', text: 'text-blue-800' };
  }
  const domain = planData.domains.find(d => d.id === domainId);
  if (!domain) {
    console.warn('[QUIZ] Dominio no encontrado:', domainId);
    return { bg: 'bg-blue-100', text: 'text-blue-800' };
  }
  const colors = {
    'purple': { bg: 'bg-purple-100', text: 'text-purple-800' },
    'blue': { bg: 'bg-blue-100', text: 'text-blue-800' },
    'green': { bg: 'bg-green-100', text: 'text-green-800' },
    'orange': { bg: 'bg-orange-100', text: 'text-orange-800' },
    'red': { bg: 'bg-red-100', text: 'text-red-800' }
  };
  return colors[domain.color] || colors.blue;
}

function renderizarPreguntas() {
  const container = document.getElementById('preguntas-container');
  if (!container) {
    console.error('[QUIZ] Error: elemento preguntas-container no encontrado');
    return;
  }
  if (!planData || !planData.questions || !planData.domains) {
    console.error('[QUIZ] Error: planData incompleto');
    container.innerHTML = '<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded">Datos de preguntas no disponibles</div>';
    return;
  }
  
  let html = '';

  planData.questions.forEach((pregunta, index) => {
    const dominio = planData.domains.find(d => d.id === pregunta.domain);
    if (!dominio) {
      console.warn('[QUIZ] Dominio no encontrado para pregunta', pregunta.id);
      return;
    }
    const numeroPregunta = index + 1;
    const colorDominio = getDomainColor(pregunta.domain);

    html += `
      <div class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-shadow p-8" 
           data-pregunta="${numeroPregunta}"
           data-id="bio-${pregunta.id}">
        <div class="mb-6 flex justify-between items-start flex-wrap gap-3">
          <div class="flex flex-wrap gap-3">
            <span class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-bold">Pregunta ${numeroPregunta}</span>
            <span class="${colorDominio.bg} ${colorDominio.text} px-4 py-2 rounded-full text-sm">${dominio.name}</span>
            ${pregunta.difficulty ? `<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs">${getDifficultyLabel(pregunta.difficulty)}</span>` : ''}
          </div>
        </div>

        <div class="prose max-w-none mb-6">
          ${pregunta.stem}
        </div>

        ${pregunta.image ? `
          <div class="my-6 text-center">
            <img src="${pregunta.image}" alt="Imagen pregunta ${numeroPregunta}" class="max-w-full h-auto mx-auto shadow-lg rounded-lg" />
          </div>
        ` : ''}

        <div class="space-y-3">
          ${pregunta.options.map(opcion => `
            <label class="flex items-start p-4 border-2 border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 cursor-pointer transition-all">
              <input type="radio" name="pregunta-${pregunta.id}" value="${opcion.id}" 
                     class="mt-1 w-5 h-5 text-purple-600" 
                     onchange="verificarRespuesta(${pregunta.id}, '${opcion.id}', ${numeroPregunta})"/>
              <span class="ml-3 flex-1">
                <span class="font-bold text-purple-700">${opcion.id.toUpperCase()})</span> ${opcion.text}
              </span>
            </label>
          `).join('')}
        </div>

        <div id="feedback-${pregunta.id}" class="hidden mt-6"></div>
      </div>
    `;
  });

  container.innerHTML = html;
  console.log('[QUIZ] Renderizadas', planData.questions.length, 'preguntas');
}

function verificarRespuesta(preguntaId, opcionId, numeroPregunta) {
  if (!planData || !planData.questions) {
    console.error('[QUIZ] planData no disponible');
    return;
  }
  
  const pregunta = planData.questions.find(p => p.id === preguntaId);
  if (!pregunta) {
    console.error('[QUIZ] Pregunta no encontrada:', preguntaId);
    return;
  }
  
  const opcion = pregunta.options.find(o => o.id === opcionId);
  if (!opcion) {
    console.error('[QUIZ] Opci√≥n no encontrada:', opcionId);
    return;
  }
  
  const feedbackDiv = document.getElementById(`feedback-${preguntaId}`);
  if (!feedbackDiv) {
    console.error('[QUIZ] Feedback div no encontrado para pregunta:', preguntaId);
    return;
  }
  
  feedbackDiv.classList.remove('hidden');
  
  if (opcion.isCorrect) {
    feedbackDiv.innerHTML = `
      <div class="bg-green-50 border-2 border-green-300 rounded-lg p-6">
        ${opcion.feedback}
      </div>
    `;
    
    if (!respuestas[preguntaId] || !respuestas[preguntaId].correcta) {
      if (respuestas[preguntaId]?.correcta === false) {
        estadisticas.incorrectas--;
        estadisticas.porDominio[pregunta.domain].correctas++;
      } else {
        estadisticas.correctas++;
        estadisticas.porDominio[pregunta.domain].correctas++;
      }
      respuestas[preguntaId] = { correcta: true, opcion: opcionId };
    }

    // Actualizar color navegador
    const navBtn = document.getElementById(`nav-btn-${numeroPregunta}`);
    if (navBtn) {
      navBtn.classList.remove('bg-gray-200', 'bg-red-200', 'text-gray-700', 'text-red-700');
      navBtn.classList.add('bg-green-200', 'text-green-800');
    }
  } else {
    feedbackDiv.innerHTML = `
      <div class="bg-red-50 border-2 border-red-300 rounded-lg p-6">
        ${opcion.feedback}
      </div>
    `;
    
    if (!respuestas[preguntaId]) {
      estadisticas.incorrectas++;
      respuestas[preguntaId] = { correcta: false, opcion: opcionId };
    }

    // Actualizar color navegador
    const navBtn = document.getElementById(`nav-btn-${numeroPregunta}`);
    if (navBtn) {
      navBtn.classList.remove('bg-gray-200', 'bg-green-200', 'text-gray-700', 'text-green-800');
      navBtn.classList.add('bg-red-200', 'text-red-700');
    }
  }

  actualizarEstadisticas();
}

function actualizarEstadisticas() {
  if (!planData || !planData.totalQuestions) {
    console.error('[QUIZ] planData.totalQuestions no disponible');
    return;
  }
  
  const total = planData.totalQuestions;
  const respondidas = Object.keys(respuestas).length;
  
  const elemCompletadas = document.getElementById('respuestas-completadas');
  const elemCorrectas = document.getElementById('respuestas-correctas');
  const elemIncorrectas = document.getElementById('respuestas-incorrectas');
  const elemProgreso = document.getElementById('barra-progreso');
  
  if (elemCompletadas) elemCompletadas.textContent = respondidas;
  if (elemCorrectas) elemCorrectas.textContent = estadisticas.correctas;
  if (elemIncorrectas) elemIncorrectas.textContent = estadisticas.incorrectas;
  
  const progreso = (respondidas / total) * 100;
  if (elemProgreso) elemProgreso.style.width = `${progreso}%`;

  if (respondidas === total) {
    mostrarResultadosFinales();
  }
}

function mostrarResultadosFinales() {
  if (!planData || !planData.totalQuestions) {
    console.error('[QUIZ] planData no disponible para resultados finales');
    return;
  }
  
  const total = planData.totalQuestions;
  const porcentajeCorrectas = ((estadisticas.correctas / total) * 100).toFixed(1);
  const porcentajeIncorrectas = ((estadisticas.incorrectas / total) * 100).toFixed(1);
  
  const elemFinalCorrectas = document.getElementById('final-correctas');
  const elemFinalIncorrectas = document.getElementById('final-incorrectas');
  const elemPorcentajeCorrectas = document.getElementById('porcentaje-correctas');
  const elemPorcentajeIncorrectas = document.getElementById('porcentaje-incorrectas');
  const elemNotaFinal = document.getElementById('nota-final');
  
  if (elemFinalCorrectas) elemFinalCorrectas.textContent = estadisticas.correctas;
  if (elemFinalIncorrectas) elemFinalIncorrectas.textContent = estadisticas.incorrectas;
  if (elemPorcentajeCorrectas) elemPorcentajeCorrectas.textContent = porcentajeCorrectas;
  if (elemPorcentajeIncorrectas) elemPorcentajeIncorrectas.textContent = porcentajeIncorrectas;
  if (elemNotaFinal) elemNotaFinal.textContent = porcentajeCorrectas;

  // Resultados por dominio
  let htmlDominios = '';
  Object.entries(estadisticas.porDominio).forEach(([domainId, stats]) => {
    const porcentaje = ((stats.correctas / stats.total) * 100).toFixed(1);
    const color = porcentaje >= 60 ? 'green' : 'red';
    
    htmlDominios += `
      <div class="bg-gray-50 rounded-lg p-4">
        <div class="flex justify-between items-center mb-2">
          <span class="font-semibold text-gray-800">${stats.nombre}</span>
          <span class="text-${color}-600 font-bold">${stats.correctas}/${stats.total} (${porcentaje}%)</span>
        </div>
        <div class="bg-gray-200 rounded-full h-2">
          <div class="bg-${color}-500 h-2 rounded-full transition-all" style="width: ${porcentaje}%"></div>
        </div>
      </div>
    `;
  });

  const elemResultadosDominio = document.getElementById('resultados-por-dominio');
  if (elemResultadosDominio) {
    elemResultadosDominio.innerHTML = htmlDominios;
  }
  
  const elemResultadosFinales = document.getElementById('resultados-finales');
  if (elemResultadosFinales) {
    elemResultadosFinales.classList.remove('hidden');
    elemResultadosFinales.scrollIntoView({ behavior: 'smooth' });
  }
  
  console.log('[QUIZ] Resultados finales mostrados');
}

function configurarEventListeners() {
  console.log('[QUIZ] Event listeners configurados');
}

console.log('[QUIZ] Script cargado completamente');
</script>
