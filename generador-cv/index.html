<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de CV Profesional - Francisco Núñez</title>
    <!-- Tailwind CDN solo para desarrollo/demo - En producción se debe compilar -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Slab:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cv-preview {
            font-family: 'Inter', sans-serif;
            background: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 210mm;
            min-height: 297mm;
            transform-origin: top left;
            transition: all 0.3s ease;
        }

        .cv-section {
            margin-bottom: 1.5rem;
        }

        .cv-section h2 {
            font-family: 'Roboto Slab', serif;
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e40af;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .cv-section h2 i {
            margin-right: 0.5rem;
            color: #3b82f6;
        }

        .skill-tag {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
            padding: 0.375rem 0.875rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            border: 1px solid #93c5fd;
            transition: all 0.2s ease;
        }

        .skill-tag:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2);
        }

        .value-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            background: #f8fafc;
            border-radius: 0.5rem;
            border-left: 4px solid #3b82f6;
            transition: all 0.2s ease;
        }

        .value-item:hover {
            background: #e2e8f0;
            transform: translateX(2px);
        }

        .value-item::before {
            content: '✓';
            color: #10b981;
            margin-right: 0.75rem;
            font-weight: 600;
            font-size: 1.1em;
        }

        .form-section {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .form-section:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .form-section summary {
            font-weight: 600;
            color: #374151;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .form-section summary::after {
            content: '▼';
            transition: transform 0.3s ease;
            font-size: 0.875rem;
        }

        .form-section[open] summary::after {
            transform: rotate(180deg);
        }

        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            background: #fafafa;
        }

        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        .item-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .item-card:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }

        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .remove-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .photo-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 0.5rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .photo-upload-area:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .photo-upload-area.dragover {
            border-color: #10b981;
            background: #ecfdf5;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media print {
            body { margin: 0; padding: 0; background: white; }
            .no-print { display: none !important; }
            .cv-preview {
                width: 100%;
                min-height: 0;
                box-shadow: none;
                margin: 0;
                border: none;
                transform: none;
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Navigation Styles */
        .header-enhanced {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .professional-name {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-link {
            color: #374151;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: #3b82f6;
        }

        .btn-premium {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .interactive-hover {
            transition: all 0.3s ease;
        }

        .interactive-hover:hover {
            transform: scale(1.05);
        }

        .interactive-text {
            transition: color 0.3s ease;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <!-- Navigation Bar -->
    <header class="header-enhanced sticky top-0 z-50 no-print" role="banner">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center" role="navigation" aria-label="Main navigation">
            <a href="/" class="flex items-center space-x-3" aria-label="Inicio">
                <img src="/imagenes/logo-profe-francisco-nuevo.svg" alt="Logo Profe Francisco - Átomo del Conocimiento" class="h-12 w-auto interactive-hover rounded-lg"/>
                <span class="text-lg font-extrabold professional-name interactive-text">Francisco Javier Núñez</span>
            </a>

            <div class="hidden md:flex items-center space-x-6">
                <a href="/#sobre-mi" class="nav-link interactive-hover interactive-text relative group">
                    Sobre Mí
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/#servicios" class="nav-link interactive-hover interactive-text relative group">
                    Servicios
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/#apps" class="nav-link interactive-hover interactive-text relative group">
                    Herramientas
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/tips-carrera-docente/" class="nav-link interactive-hover interactive-text relative group">
                    Tips Docentes
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/portafolio/" class="nav-link interactive-hover interactive-text relative group">
                    Portafolio
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/generador-cv/" class="nav-link interactive-hover interactive-text relative group text-blue-600 font-semibold">
                    Generador CV
                    <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-gradient-to-r from-blue-500 to-purple-500"></span>
                </a>
                <a href="/contacto/" class="btn-premium">Contacto</a>
            </div>

            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-800 dark:text-gray-200 focus:outline-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-expanded="false" aria-controls="mobile-menu">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/>
                    </svg>
                </button>
            </div>
        </nav>

        <div id="mobile-menu" class="md:hidden hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg" role="menu">
            <a href="/#sobre-mi" class="block py-3 px-6 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Sobre Mí</a>
            <a href="/#servicios" class="block py-3 px-6 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Servicios</a>
            <a href="/#apps" class="block py-3 px-6 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Herramientas</a>
            <a href="/tips-carrera-docente/" class="block py-3 px-6 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Tips Docentes</a>
            <a href="/portafolio/" class="block py-3 px-6 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Portafolio</a>
            <a href="/generador-cv/" class="block py-3 px-6 text-blue-600 dark:text-blue-400 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Generador CV</a>
            <a href="/contacto/" class="block py-3 px-6 text-blue-600 dark:text-blue-400 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" role="menuitem">Contacto</a>
        </div>
    </header>

    <div class="max-w-7xl mx-auto pt-24 px-4 sm:px-8">
        <div class="mb-8 no-print text-center">
            <h1 class="text-4xl lg:text-5xl font-bold text-white mb-4 animate-fade-in">
                <i class="fas fa-file-alt text-blue-300 mr-3"></i>
                Generador de CV Profesional
            </h1>
            <p class="text-xl text-white/90 max-w-2xl mx-auto">
                Crea un currículum vitae moderno y profesional que destaque tus habilidades y experiencia
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Form Panel -->
            <div class="space-y-6 no-print">
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                            <i class="fas fa-edit text-blue-600"></i>
                            Información Personal
                        </h2>
                        <div class="text-sm text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>
                            Paso 1 de 5
                        </div>
                    </div>

                    <div class="space-y-4">
                        <input type="text" id="full-name" placeholder="Nombre Completo" class="input-field" data-target="#cv-full-name">
                        <input type="text" id="title" placeholder="Título Profesional" class="input-field" data-target="#cv-title">
                        <input type="email" id="email" placeholder="Correo Electrónico" class="input-field" data-target="#cv-email">
                        <input type="tel" id="phone" placeholder="Teléfono" class="input-field" data-target="#cv-phone">
                        <input type="text" id="address" placeholder="Dirección, Ciudad" class="input-field" data-target="#cv-address">
                    </div>
                </div>

                <!-- Photo Upload Section -->
                <div class="glass-effect rounded-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-camera text-green-600"></i>
                        Foto de Perfil
                    </h3>

                    <div class="photo-upload-area" id="photo-upload-area">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">Arrastra una imagen aquí o haz clic para seleccionar</p>
                        <p class="text-sm text-gray-500">PNG, JPG hasta 5MB</p>
                        <input type="file" id="photo-upload" accept="image/*" class="hidden">
                    </div>

                    <div class="flex gap-2 mt-4">
                        <button id="camera-btn" class="btn-secondary flex-1">
                            <i class="fas fa-camera"></i>
                            Usar Cámara
                        </button>
                    </div>

                    <div id="camera-view" class="hidden mt-4">
                        <video id="video" class="w-full rounded-lg border-2 border-gray-300" autoplay></video>
                        <div class="flex gap-2 mt-2">
                            <button id="capture-btn" class="btn-primary flex-1">
                                <i class="fas fa-camera"></i>
                                Capturar
                            </button>
                            <button id="cancel-camera-btn" class="btn-secondary flex-1">
                                <i class="fas fa-times"></i>
                                Cancelar
                            </button>
                        </div>
                    </div>
                    <canvas id="canvas" class="hidden"></canvas>
                </div>

                <!-- Profile Section -->
                <div class="glass-effect rounded-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-user text-purple-600"></i>
                        Perfil Profesional
                    </h3>
                    <textarea id="profile" rows="4" placeholder="Describe tu experiencia, objetivos profesionales y lo que te hace único..." class="input-field" data-target="#cv-profile"></textarea>
                </div>

                <!-- Education Section -->
                <div class="form-section">
                    <summary class="font-semibold text-lg cursor-pointer text-gray-800">
                        <i class="fas fa-graduation-cap text-blue-600 mr-2"></i>
                        Formación Académica
                    </summary>
                    <div class="mt-4 border-t pt-4 space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <input type="text" id="education-degree" placeholder="Título/Carrera" class="input-field">
                            <input type="text" id="education-institution" placeholder="Institución" class="input-field">
                            <input type="text" id="education-year" placeholder="Año de egreso" class="input-field">
                        </div>
                        <button id="add-education-btn" class="btn-primary w-full">
                            <i class="fas fa-plus"></i>
                            Agregar Formación
                        </button>
                        <div id="education-list" class="space-y-2"></div>
                    </div>
                </div>

                <!-- Courses Section -->
                <div class="form-section">
                    <summary class="font-semibold text-lg cursor-pointer text-gray-800">
                        <i class="fas fa-certificate text-green-600 mr-2"></i>
                        Cursos y Capacitaciones
                    </summary>
                    <div class="mt-4 border-t pt-4 space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <input type="text" id="course-name" placeholder="Nombre del curso" class="input-field">
                            <input type="text" id="course-institution" placeholder="Institución" class="input-field">
                            <input type="text" id="course-year" placeholder="Año" class="input-field">
                        </div>
                        <button id="add-course-btn" class="btn-primary w-full">
                            <i class="fas fa-plus"></i>
                            Agregar Curso
                        </button>
                        <div id="courses-list" class="space-y-2"></div>
                    </div>
                </div>

                <!-- Skills Section -->
                <div class="form-section">
                    <summary class="font-semibold text-lg cursor-pointer text-gray-800">
                        <i class="fas fa-tools text-orange-600 mr-2"></i>
                        Habilidades y Conocimientos
                    </summary>
                    <div class="mt-4 border-t pt-4 space-y-3">
                        <div class="flex gap-2">
                            <input type="text" id="skill-input" placeholder="Ej: Microsoft Office, Inglés avanzado..." class="input-field">
                            <button id="add-skill-btn" class="btn-primary px-4">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="skills-list" class="flex flex-wrap gap-2"></div>
                    </div>
                </div>

                <!-- Values Section -->
                <div class="form-section">
                    <summary class="font-semibold text-lg cursor-pointer text-gray-800">
                        <i class="fas fa-heart text-red-600 mr-2"></i>
                        Valores y Competencias
                    </summary>
                    <div class="mt-4 border-t pt-4 space-y-3">
                        <div class="flex gap-2">
                            <input type="text" id="value-input" placeholder="Ej: Trabajo en equipo, Liderazgo..." class="input-field">
                            <button id="add-value-btn" class="btn-primary px-4">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="values-list" class="space-y-2"></div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button id="generate-pdf-btn" class="btn-secondary flex-1">
                            <i class="fas fa-download"></i>
                            Descargar PDF
                        </button>
                        <button id="preview-btn" class="btn-primary flex-1">
                            <i class="fas fa-eye"></i>
                            Vista Previa
                        </button>
                    </div>
                    <div class="progress-bar mt-4">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="bg-gray-100 p-4 rounded-xl flex justify-center items-start sticky top-24">
                <div id="cv-preview" class="cv-preview p-8 rounded-lg animate-fade-in">
                    <!-- Header Section -->
                    <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6 border-b-2 border-gray-200 pb-6 mb-6">
                        <div class="flex-shrink-0">
                            <img id="cv-photo" src="https://placehold.co/128x128/e0e7ff/3730a3?text=Foto" alt="Foto de Perfil" class="w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg">
                        </div>
                        <div class="text-center sm:text-left flex-1">
                            <h1 id="cv-full-name" class="text-3xl lg:text-4xl font-bold text-gray-800 mb-2">Tu Nombre Completo</h1>
                            <p id="cv-title" class="text-xl text-blue-600 font-medium mb-3">Tu Título Profesional</p>
                            <div class="flex flex-col sm:flex-row items-center justify-center sm:justify-start flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600">
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-envelope text-blue-500"></i>
                                    <span id="cv-email">tu.correo@email.com</span>
                                </span>
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-phone text-green-500"></i>
                                    <span id="cv-phone">+569 1234 5678</span>
                                </span>
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-map-marker-alt text-red-500"></i>
                                    <span id="cv-address">Tu Dirección, Ciudad</span>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Section -->
                    <div class="cv-section" id="cv-profile-container">
                        <h2>
                            <i class="fas fa-user"></i>
                            Perfil Profesional
                        </h2>
                        <p id="cv-profile" class="text-gray-700 leading-relaxed text-justify">
                            Aquí va tu resumen profesional que destaque tu experiencia y objetivos...
                        </p>
                    </div>

                    <!-- Education Section -->
                    <div class="cv-section" id="cv-education-container">
                        <h2>
                            <i class="fas fa-graduation-cap"></i>
                            Formación Académica
                        </h2>
                        <div id="cv-education-list" class="space-y-4">
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h3 class="font-semibold text-lg text-gray-800">Licenciatura en Educación</h3>
                                <p class="text-gray-600">Universidad de Chile</p>
                                <p class="text-sm text-gray-500">2015 - 2019</p>
                            </div>
                        </div>
                    </div>

                    <!-- Courses Section -->
                    <div class="cv-section hidden" id="cv-courses-container">
                        <h2>
                            <i class="fas fa-certificate"></i>
                            Cursos y Capacitaciones
                        </h2>
                        <div id="cv-courses-list" class="space-y-4"></div>
                    </div>

                    <!-- Skills Section -->
                    <div class="cv-section" id="cv-skills-container">
                        <h2>
                            <i class="fas fa-tools"></i>
                            Habilidades y Conocimientos
                        </h2>
                        <div id="cv-skills-list" class="flex flex-wrap gap-2">
                            <span class="skill-tag">
                                <i class="fas fa-star text-yellow-500"></i>
                                Comunicación
                            </span>
                            <span class="skill-tag">
                                <i class="fas fa-star text-yellow-500"></i>
                                Liderazgo
                            </span>
                        </div>
                    </div>

                    <!-- Values Section -->
                    <div class="cv-section" id="cv-values-container">
                        <h2>
                            <i class="fas fa-heart"></i>
                            Valores y Competencias
                        </h2>
                        <div id="cv-values-list" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                            <div class="value-item">Responsabilidad</div>
                            <div class="value-item">Trabajo en equipo</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    class CVGenerator {
        constructor() {
            this.data = {
                personal: {},
                education: [],
                courses: [],
                skills: [],
                values: []
            };
            this.init();
        }

        init() {
            this.setupEventListeners();
            this.setupPhotoUpload();
            this.setupCamera();
            this.updateProgress();
        }

        setupEventListeners() {
            // Real-time preview updates
            const inputs = document.querySelectorAll('input[data-target], textarea[data-target]');
            inputs.forEach(input => {
                input.addEventListener('input', (e) => this.updatePreview(e));
                input.addEventListener('blur', (e) => this.updatePreview(e));
            });

            // Dynamic list management
            this.setupDynamicList('education', ['education-degree', 'education-institution', 'education-year']);
            this.setupDynamicList('courses', ['course-name', 'course-institution', 'course-year']);
            this.setupDynamicList('skills', ['skill-input']);
            this.setupDynamicList('values', ['value-input']);

            // PDF generation
            document.getElementById('generate-pdf-btn').addEventListener('click', () => this.generatePDF());

            // Preview button
            document.getElementById('preview-btn').addEventListener('click', () => this.showPreview());

            // Mobile menu
            this.setupMobileMenu();
        }

        updatePreview(event) {
            const targetElement = document.querySelector(event.target.dataset.target);
            if (targetElement) {
                const value = event.target.value.trim();
                targetElement.textContent = value || event.target.placeholder;
            }
            this.updateProgress();
        }

        setupDynamicList(type, inputIds) {
            const addBtn = document.getElementById(`add-${type}-btn`);
            const listContainer = document.getElementById(`${type}-list`);
            const cvListContainer = document.getElementById(`cv-${type}-list`);
            const cvSectionContainer = document.getElementById(`cv-${type}-container`);
            const inputs = inputIds.map(id => document.getElementById(id));

            // Verificar que todos los elementos existan
            if (!addBtn || !listContainer || !cvListContainer || inputs.some(input => !input)) {
                console.warn(`Elementos no encontrados para ${type}`);
                return;
            }

            const addItem = () => {
                const values = inputs.map(input => input.value.trim());
                if (values.some(val => val !== '')) {
                    this.data[type].push(values);
                    inputs.forEach(input => input.value = '');
                    this.renderList(type, listContainer, cvListContainer, cvSectionContainer);
                    inputs[0].focus();
                    this.updateProgress();
                }
            };

            addBtn.addEventListener('click', addItem);

            // Enter key support
            inputs.forEach(input => {
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        addItem();
                    }
                });
            });
        }

        renderList(type, listContainer, cvListContainer, cvSectionContainer) {
            listContainer.innerHTML = '';
            cvListContainer.innerHTML = '';

            if (cvSectionContainer) {
                cvSectionContainer.classList.toggle('hidden', this.data[type].length === 0);
            }

            this.data[type].forEach((item, index) => {
                // Form list item
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item-card';
                itemDiv.innerHTML = `
                    <span class="font-medium">${item.map(val => val || 'N/A').join(' - ')}</span>
                    <button class="remove-btn" onclick="cvGenerator.removeItem('${type}', ${index})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                listContainer.appendChild(itemDiv);

                // CV preview item
                const cvItem = this.createCvItem(type, item);
                cvListContainer.appendChild(cvItem);
            });
        }

        createCvItem(type, item) {
            const div = document.createElement('div');

            switch(type) {
                case 'education':
                case 'courses':
                    div.innerHTML = `
                        <div class="border-l-4 border-blue-500 pl-4 mb-4">
                            <h3 class="font-semibold text-lg text-gray-800">${item[0] || 'Título'}</h3>
                            <p class="text-gray-600">${item[1] || 'Institución'}</p>
                            <p class="text-sm text-gray-500">${item[2] || 'Año'}</p>
                        </div>
                    `;
                    break;
                case 'skills':
                    div.innerHTML = `<span class="skill-tag"><i class="fas fa-star text-yellow-500"></i>${item[0]}</span>`;
                    break;
                case 'values':
                    div.innerHTML = `<div class="value-item">${item[0]}</div>`;
                    break;
            }

            return div;
        }

        removeItem(type, index) {
            this.data[type].splice(index, 1);
            const listContainer = document.getElementById(`${type}-list`);
            const cvListContainer = document.getElementById(`cv-${type}-list`);
            const cvSectionContainer = document.getElementById(`cv-${type}-container`);
            this.renderList(type, listContainer, cvListContainer, cvSectionContainer);
            this.updateProgress();
        }

        setupPhotoUpload() {
            const uploadArea = document.getElementById('photo-upload-area');
            const fileInput = document.getElementById('photo-upload');
            const cvPhoto = document.getElementById('cv-photo');

            uploadArea.addEventListener('click', () => fileInput.click());

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    this.handleFileUpload(files[0]);
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files && e.target.files[0]) {
                    this.handleFileUpload(e.target.files[0]);
                }
            });
        }

        handleFileUpload(file) {
            if (file.size > 5 * 1024 * 1024) { // 5MB limit
                alert('La imagen es demasiado grande. Máximo 5MB.');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('cv-photo').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        setupCamera() {
            const cameraBtn = document.getElementById('camera-btn');
            const cameraView = document.getElementById('camera-view');
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const captureBtn = document.getElementById('capture-btn');
            const cancelBtn = document.getElementById('cancel-camera-btn');
            const cvPhoto = document.getElementById('cv-photo');

            if (!cameraBtn || !cameraView || !video || !canvas || !captureBtn || !cancelBtn || !cvPhoto) {
                console.warn('Elementos de cámara no encontrados');
                return;
            }

            let stream = null;

            cameraBtn.addEventListener('click', async () => {
                try {
                    cameraView.classList.remove('hidden');
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: { facingMode: 'user', width: 640, height: 480 }
                    });
                    video.srcObject = stream;
                    video.play();
                } catch (err) {
                    console.error('Error al acceder a la cámara:', err);
                    alert('No se pudo acceder a la cámara. Verifica los permisos del navegador.\nError: ' + err.message);
                    cameraView.classList.add('hidden');
                }
            });

            captureBtn.addEventListener('click', () => {
                if (video.videoWidth > 0 && video.videoHeight > 0) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    cvPhoto.src = canvas.toDataURL('image/jpeg', 0.8);
                    this.stopCamera(stream);
                    stream = null;
                    cameraView.classList.add('hidden');
                } else {
                    alert('La cámara aún no está lista. Espera un momento.');
                }
            });

            cancelBtn.addEventListener('click', () => {
                this.stopCamera(stream);
                stream = null;
                cameraView.classList.add('hidden');
            });
        }

        stopCamera(stream) {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        }

        updateProgress() {
            const inputs = document.querySelectorAll('input[data-target], textarea[data-target]');
            const filledInputs = Array.from(inputs).filter(input => input.value.trim() !== '');
            const totalItems = Object.values(this.data).reduce((sum, arr) => sum + arr.length, 0);
            const totalFields = inputs.length + 4; // 4 sections
            const progress = ((filledInputs.length + totalItems) / totalFields) * 100;

            document.getElementById('progress-fill').style.width = Math.min(progress, 100) + '%';
        }

        setupMobileMenu() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !expanded);
                });

                document.addEventListener('click', (event) => {
                    if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
                        mobileMenu.classList.add('hidden');
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                    }
                });
            }
        }

        showPreview() {
            // Force update all preview elements
            const inputs = document.querySelectorAll('input[data-target], textarea[data-target]');
            inputs.forEach(input => {
                const event = new Event('input');
                input.dispatchEvent(event);
            });

            // Scroll to preview
            document.getElementById('cv-preview').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        async generatePDF() {
            const btn = document.getElementById('generate-pdf-btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Generando...';
            btn.disabled = true;

            try {
                // Verificar que jsPDF esté disponible
                if (!window.jspdf) {
                    throw new Error('jsPDF no está cargado');
                }
                if (!window.html2canvas) {
                    throw new Error('html2canvas no está cargado');
                }

                const { jsPDF } = window.jspdf;
                const cvElement = document.getElementById('cv-preview');

                if (!cvElement) {
                    throw new Error('Elemento CV no encontrado');
                }

                // Capturar el CV como imagen
                const canvas = await html2canvas(cvElement, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff',
                    windowWidth: cvElement.scrollWidth,
                    windowHeight: cvElement.scrollHeight
                });

                // Crear PDF
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4',
                    compress: true
                });

                const imgData = canvas.toDataURL('image/jpeg', 0.9);
                const imgWidth = 210; // A4 width in mm
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                // Si el contenido es más alto que A4, agregar páginas
                let heightLeft = imgHeight;
                let position = 0;

                pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST');
                heightLeft -= 297;

                while (heightLeft > 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST');
                    heightLeft -= 297;
                }

                // Generar nombre de archivo
                const date = new Date().toISOString().split('T')[0];
                const fullName = document.getElementById('full-name').value.trim() || 'SinNombre';
                const fileName = `CV_${fullName.replace(/\s+/g, '_')}_${date}.pdf`;

                // Descargar PDF
                pdf.save(fileName);

                // Mostrar mensaje de éxito
                setTimeout(() => {
                    alert('✓ PDF descargado correctamente: ' + fileName);
                }, 500);

            } catch (error) {
                console.error('Error generando PDF:', error);
                alert('❌ Error al generar el PDF: ' + error.message + '\n\nVerifica que todos los campos estén completos.');
            } finally {
                btn.innerHTML = originalHTML;
                btn.disabled = false;
            }
        }
    }

    // Initialize the CV generator
    const cvGenerator = new CVGenerator();
    </script>
</body>
</html>

